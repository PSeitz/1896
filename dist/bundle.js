!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=1)}([function(e,t,n){"use strict";function r(e){function t(e,t){return e>=t[0]&&e<=t[1]}var n=e.world,r=e.seaLevel;console.time("cells"),n.cells.forEach(function(t){var n=noise.simplex2(10*t.x/e.mapWidth,10*t.y/e.mapHeight),r=noise.simplex3(2*t.x/e.mapWidth,2*t.y/e.mapHeight,n*t.y/(5*e.mapHeight));t.data.elevation=r}),n.cells.forEach(function(t){return t.data.temperature=noise.simplex2(t.x/e.mapWidth,t.y/e.mapHeight)}),n.cells.forEach(function(t){return t.data.rainfall=noise.simplex2(2*t.x/e.mapWidth,2*t.y/e.mapHeight)}),n.cells.forEach(function(e){return e.data.drainage=noise.simplex2(e.x/20,e.y/20)}),n.cells.forEach(function(e){return e.scale()}),n.cells.forEach(function(e){return e.classify(r)}),console.timeEnd("cells"),function(){var e=n.cells.filter(function(e){var a=n.getNeighborsWithCell(e);return t(e.data.elevation,[r-.05,r])&&a.some(function(e){return isWater(e.type)})&&a.some(function(e){return!isWater(e.type)})});console.log(e.length);for(var a=0;a<250;a++)!function(){var t=_.sample(e);t.isCity=!0;var n=canvasWidth*canvasHeight/1e5;e.filter(function(e){return getDistance(e,t)<n&&e!=t}).forEach(function(e){return e.isCity=!1})}()}();var a=canvasWidth*canvasHeight/5e4;console.time("groupCities"),function(){for(var t=new Array(e.mapHeight),r=0;r<e.mapHeight;r++){t[r]=new Array(e.mapWidth);for(var a=0;a<e.mapWidth;a++){var i=isWater(n.getCellAtXY(a,r).type)||n.getCellAtXY(a,r).isCity;t[r][a]=i?0:1}}easystar.setGrid(t),easystar.setAcceptableTiles([0]),easystar.enableSync()}(),function(){for(var e=n.cells.filter(function(e){return e.isCity}),t=[];e.length>0;){var r;!function(){var n=e.pop(),a=[];t.push(a),a.push(n),r=_.remove(e,function(e){return easystar.findPath(n.x,n.y,e.x,e.y)}),Array.prototype.push.apply(a,r)}()}var a=_.maxBy(t,"length");t.forEach(function(e){e!=a&&e.forEach(function(e){return e.isCity=!1})})}(),function(){for(;n.cells.filter(function(e){return e.isCity}).length>a;)_.sample(n.cells.filter(function(e){return e.isCity})).isCity=!1}();var i=n.cells.filter(function(e){return e.isCity});i.forEach(function(e){game.cities.push(new City(faker.address.city(),e,10,n))}),console.timeEnd("groupCities");var o=_.sample(i),l=new Ship(faker.commerce.productName(),100,35,o,game.player);game.ships.push(l)}Object.defineProperty(t,"__esModule",{value:!0}),t.generateWorld=r},function(e,t,n){"use strict";function r(e){var t=-1*Math.round(scale(e,minTemperatur,maxTemperatur,-255,0)),n=t.toString(16);return"0xFF"+n+n}function a(e){var t=scale(e,-1,1,-255,0),n=Math.round(-1*t).toString(16);return"0x"+n+n+n}function i(e){var t=-1*Math.round(scale(e,-1,1,-255,0)),n=t.toString(16);return"0x"+n+n+"FF"}function o(e){var t=[],n=PIXI.loader.resources[e].textures;n||alert(e+" animation not found");for(var r=0;r<Object.keys(n).length;r++)t.push(n[e+r+".png"]);var a=new PIXI.extras.MovieClip(t);return a.interactive=!0,a.animationSpeed=.13,a.play(),a}function l(e){var t=e.cell.x*f+20,n=e.cell.y*f-5;if(w&&(v.removeChild(w),w.x==t&&w.y==n))return void(w=null);w=new PIXI.Container,w.x=t,w.y=n;var r=new PIXI.Graphics;drawCityMenu(r,w);var a=o("beer");a.click=function(e){return alert("CLICK Beer")},w.addChild(a),v.addChild(w)}function c(){function e(){y.render(v),requestAnimationFrame(e)}var t=document.getElementById("stage");t.width=d,t.height=p,y=new PIXI.autoDetectRenderer(d,p,{view:t,backgroundColor:1087931,antialias:!0,resolution:window.devicePixelRatio||1,autoResize:!0}),PIXI.cocoontext.CONST.TEXT_RESOLUTION=window.devicePixelRatio,function(t){g.container=new PIXI.Container,g.temperatureView=new PIXI.Graphics,g.worldView=new PIXI.Graphics,g.elevationView=new PIXI.Graphics,g.rainFallView=new PIXI.Graphics;for(var n=0;n<t.cells.length;n++){var o=t.cells[n],c=0+o.x*f,s=0+o.y*f,u=cellTypes[o.type];drawTileRaw(g.worldView,u.color,f,c,s),drawTileRaw(g.temperatureView,r(o.data.temperature),f,c,s),drawTileRaw(g.elevationView,a(o.data.elevation),f,c,s),drawTileRaw(g.rainFallView,i(o.data.rainfall),f,c,s)}g.container.addChild(g.worldView),v.addChild(g.container),h.cities.forEach(function(e){var t=drawHouse("0xBB3333",Math.round(1.5*f));t.x=e.cell.x*f,t.y=e.cell.y*f,t.interactive=!0,t.click=function(t){return l(e)},v.addChild(t);var n={fontFamily:"Arial",fontSize:"14px",fill:"white",align:"center",stroke:"#34495e",strokeThickness:3,lineJoin:"round"},r=new PIXI.Text(e.name,n);setXY(r.anchor,.5),r.x=e.cell.x*f+5,r.x<=40&&(r.anchor.x=.1),r.x>=d-40&&(r.anchor.x=.9),r.y=e.cell.y*f-5,r.canvas.style.webkitFontSmoothing="antialiased",v.addChild(r)}),h.ships.forEach(function(e){var t=PIXI.loader.resources.shipmap.texture,n=new PIXI.Sprite(t);n.interactive=!0,n.click=function(e){alert("CLICK Ship!")},n.x=e.position.x*f,n.y=e.position.y*f,v.addChild(n)}),e()}(m),y.render(v)}function s(){PIXI.loader.add("ship1","img/shipsmall_1.jpg").add("ship2","img/shipmedium_1.jpg").add("ship3","img/shiplarge_1.jpg").add("shipmap","img/ship_map.png").add("beer","img/beer/beer.json").load(c),new Vue({el:"#money",data:{money:"Hello Vue.js!"}})}var u=n(0),d=1500,p=800,f=10,h=(new EasyStar.js,new Game(new WorldMap(null,150,80)));(0,u.generateWorld)({world:h.world,seaLevel:.2,mapWidth:150,mapHeight:80}),localStorage.savegame1?(console.time("loadGame"),console.log("File Size: "+localStorage.savegame1.length/1e6+" mb"),h=JSON.parse(localStorage.savegame1),console.timeEnd("loadGame")):(console.time("generateWorld"),(0,u.generateWorld)({world:h.world,seaLevel:.2,mapWidth:150,mapHeight:80}),console.timeEnd("generateWorld"),localStorage.savegame1=JSON.stringify(h));var m=h.world;window.onload=function(){s()};var g={},v=new PIXI.Container(6750105,!0),y=void 0,w=null}]);
//# sourceMappingURL=bundle.js.map